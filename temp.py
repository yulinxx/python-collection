import cv2

mapX = [[89, 67, 89, 83, 20, 81, 39, 27, 60, 63, 33, 74, 7, 32, 13, 64, ],
        [24, 87, 48, 29, 73, 32, 27, 63, 24, 75, 22, 40, 77, 51, 24, 71, ],
        [85, 10, 11, 59, 31, 49, 40, 1, 52, 7, 51, 9, 84, 29, 54, 33, ],
        [34, 15, 85, 10, 39, 2, 93, 20, 74, 6, 58, 53, 63, 60, 80, 5, ],
        [82, 41, 10, 89, 29, 46, 17, 34, 39, 72, 4, 29, 93, 35, 49, 5, ],
        [59, 37, 74, 90, 99, 61, 64, 26, 24, 14, 67, 13, 5, 63, 39, 64, ],
        [89, 73, 37, 85, 11, 3, 83, 32, 50, 30, 85, 43, 16, 50, 5, 25, ],
        [91, 20, 54, 2, 9, 4, 18, 80, 24, 71, 80, 43, 39, 97, 37, 35, ],
        [68, 99, 64, 85, 86, 93, 4, 30, 20, 39, 72, 79, 35, 48, 58, 49, ],
        [3, 1, 69, 40, 83, 27, 76, 2, 94, 90, 78, 43, 69, 61, 11, 80, ],
        [30, 82, 66, 93, 97, 36, 96, 38, 20, 51, 70, 31, 96, 15, 70, 74, ],
        [37, 25, 89, 93, 12, 45, 9, 97, 37, 19, 34, 70, 72, 68, 8, 97, ],
        [74, 46, 74, 35, 88, 16, 41, 50, 6, 81, 93, 12, 33, 36, 76, 24, ],
        [27, 46, 56, 22, 12, 71, 10, 78, 56, 24, 68, 4, 88, 71, 80, 14, ],
        [89, 16, 53, 27, 99, 20, 98, 16, 33, 48, 17, 32, 53, 58, 66, 95, ],
        [59, 45, 46, 95, 41, 29, 34, 55, 44, 74, 13, 59, 95, 62, 4, 46]
        ]

if __name__ == '__main__':
    img = cv2.imread("F:/a.jpg")
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    img2 = img.copy()
    width, height, z = img.shape

    for y in range(0, height):
        for x in range(0, width):
            (b, g, r) = img[x, y]

            # print(f'{x} -- {y} --- {x % 16} - {y % 16}')
            try:
                if (int(b) + int(g) + int(r)) / 3 < int(mapX[int(y % 16)][int(x % 16)]):
                    gray[x, y] = 0
                else:
                    gray[x, y] = 255
            except:
                gray[x, y] = 255

    # image = cv2.merge((blue, green, red))
    # cv2.imshow('original', img2)
    # cv2.imshow('merged', image)
    cv2.imshow('gray', gray)
    cv2.imwrite('F:/out.jpg', gray)
    cv2.waitKey(0)
